.text
.global _start
_start:
PUSH {LR}
MOV R0,#101
MOV R1,#1
BL CONFIG_INTERRUPT
LDR R0, =0xFFFEC100
MOV R1,R6
STRB R1, [R0,#0x04]
LDRSB R2, [R0,#0x04]
MOV R1,#1
STR R1,[R0]
LDR R0, =0xFFFED000
STR R1, [R0]
POP {PC}

CONFIG_INTERRUPT:
PUSH {R4-R5,LR}
LSR R4,R0,#3
BIC R4,R4,#3
LDR R2, =0xFFFED100
ADD R4, R2, R4
AND R2,R0,#0x1F
MOV R5, #1
LSL R2,R5,R2
LDR R3,[R4]
ORR R3,R3,R2
STR R3,[R4]
BIC R4,R0,#3
LDR R2, =0xFFFED400
ADD R4,R2,R4
AND R2,R0,#3
ADD R4,R2,R4
MOV R5,#8
STRB R5,[R4]
LDRSB R6,[R4]
BIC R4,R0,#3
LDR R2, =0xFFFED800
ADD R4,R2,R4
AND R2,R0,#3
ADD R4,R2,R4
STRB R1,[R4]
POP {R4-R5,PC}
.end
